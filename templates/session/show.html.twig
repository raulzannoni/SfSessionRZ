{% extends 'base.html.twig' %}

{% block title %}Detail of Session: {{session}}{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>
    <h1>Detail of Session: {{session}}</h1>
        <div class="m-3">
            <div class="card mb-3" style="max-width: 1024px;">
                <div class="row g-0">
                    <div class="col-md-12">
                        <div class="card-body">
                            <h2 class="card-title"></h2><br>
                            <p class="card-textlh-1"><b>Trainer : </b><a href="{{ path('show_trainer', {'id' : session.Trainer.id}) }}">{{session.Trainer}}</a></p>
                            <p class="card-textlh-1"><b>Start date : </b>{{session.DateStart|date('d-m-Y')}}</p>
                            <p class="card-textlh-1"><b>End date : </b>{{session.DateEnd|date('d-m-Y')}}</p>
                            <p class="card-textlh-1"><b>Total places : </b>{{session.TotalPlaces}}</p>
                            <p class="card-textlh-1"><b>Available places : </b>{{session.TotalPlaces - session.stagiaires|length}}</p>
                        </div>
                    </div>
                </div>
                {% if session.stagiaires|length == 0 %}
                <div class="row g-0">
                    <div class="col-md-12">
                        <h4>Stagiaires not subscribed</h4>
                        <table class="table table-striped table-dark">
                            <thead>
                                <tr>
                                <th scope="col">Stagiaire</th>
                                <th scope="col">Subscribe</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for stagiaire in stagiairesNotSubscribed %}
                                <tr>
                                <th scope="row"><a href="{{ path('show_stagiaire', {'id' : stagiaire.id}) }}">{{stagiaire}}</a></th>
                                <td><a href="
                                {{ path('add_stagiaire', {'idSession' : session.id, 'idStagiaire' : stagiaire.id}) }}
                                "><i class="fa-solid fa-plus" style="color: #06d028;"></i></a></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    <div>
                </div>
                {% elseif session.stagiaires|length == session.TotalPlaces %}
                <div class="row g-0">
                    <div class="col-md-6">
                        <h4>Stagiaires subscribed</h4>
                        <table class="table table-striped table-dark">
                            <thead>
                                <tr>
                                <th scope="col">Stagiare</th>
                                <th scope="col">Unsubscribe</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for stagiaire in session.stagiaires %}
                                <tr>
                                <th scope="row"><a href="{{ path('show_stagiaire', {'id' : stagiaire.id}) }}">{{stagiaire}}</a></th>
                                <td><a href="{#{{ path('remove_stagiaire', {'idSession' : session.id, 'idStagiaire' : stagiaire.id}) }}#}"><i class="fa-solid fa-trash-can" style="color: #ff0000;"></i></a></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    <div>
                </div>
                {% else %}
                <div class="row g-0">
                    <div class="col-md-6">
                        <h4>Stagiaires subscribed</h4>
                        <table class="table table-striped table-dark">
                            <thead>
                                <tr>
                                <th scope="col">Stagiare</th>
                                <th scope="col">Unsubscribe</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for stagiaire in session.stagiaires %}
                                <tr>
                                <th scope="row"><a href="{{ path('show_stagiaire', {'id' : stagiaire.id}) }}">{{stagiaire}}</a></th>
                                <td><a href="{#{{ path('remove_stagiaire', {'idSession' : session.id, 'idStagiaire' : stagiaire.id}) }}#}"><i class="fa-solid fa-trash-can" style="color: #ff0000;"></i></a></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    <div>
                </div>
                <div class="row g-0">
                    <div class="col-md-12">
                        <h4>Stagiaires not subscribed</h4>
                        <table class="table table-striped table-dark">
                            <thead>
                                <tr>
                                <th scope="col">Stagiaire</th>
                                <th scope="col">Subscribe</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for stagiaire in stagiairesNotSubscribed %}
                                <tr>
                                <th scope="row"><a href="{{ path('show_stagiaire', {'id' : stagiaire.id}) }}">{{stagiaire}}</a></th>
                                <td><a href="
                                {{ path('add_stagiaire', {'idSession' : session.id, 'idStagiaire' : stagiaire.id}) }}
                                "><i class="fa-solid fa-plus" style="color: #06d028;"></i></a></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    <div>
                </div>
                {% endif %}

                <div class="row g-0">
                    <div class="col-md-16">
                        <h4>Program</h4>
                        <table class="table table-striped table-dark">
                            <thead>
                                <tr>
                                <th scope="col">Module</th>
                                <th scope="col">Category</th>
                                <th scope="col">Days</th>
                                <th scope="col">Delete Session</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                {% for represent in session.represents %}
                                <th scope="row"><a href="{{ path('show_module', {'id' : represent.modules.id}) }}">{{ represent.modules }}</a></th> 
                                <td>{{ represent.modules.categorie }}</td>
                                <td>({{ represent.days}} jours)</td>
                                <td>/<td>
                                </tr>
                                {% endfor %}
                                <tr>
                                <th colspan=2><b>Total Days : </b></th>
                                <th colspan=2><b> {{ totalDays }}</b></th>
                                </tr> 
                            </tbody>
                        </table>
                    <div>
                </div>
            </div>
        </div>
{% endblock %}
